function sortedWordList(r){for(var e=[],t=0;r>t;t++){do var o=testWords[Math.floor(Math.random()*testWords.length)];while(-1!==e.indexOf(o));e.push(o)}return e.sort(function(r,e){return e.length-r.length})}function makePuzzle(r){var e=r.words,t=0,o=[],n=[];for(r.directions.sort();t<e.length;){o=resize(o,e[t].length,"-");for(var a=!1,i=concatMatrices(o,e[t],r.directions.shuffle(),!0),s=0;s<i.length;s++){var l=insert({direction:i[s].direction,start:{row:i[s].row,col:i[s].col},word:e[t],grid:o,reverse:r.reversable?Math.floor(2*Math.random()):!1});l&&(a=!0,o=l.grid,n.push(l.key),s=i.length)}a?t++:o=resize(o,o.length+1,"-")}return o=fillRandom(o),{grid:o,key:n}}function blankPuzzle(r,e){for(var t=[],o=0;r>o;o++){for(var n=[],a=0;r>a;a++)n.push(e);t.push(n.slice())}return t}function deepCopy(r){var e=r instanceof Array?[]:{};for(var t in r)"object"==typeof r[t]?e[t]=deepCopy(r[t]):e[t]=r[t];return e}function randomLetter(){var r=Math.floor(26*Math.random());return"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[r]}function resize(r,e,t){for(var o=deepCopy(r);o.length<e;)o.push([]);for(var n=0;n<o.length;n++)for(;o[n].length<e;)o[n].push(t);return o}function stepDirection(r){return"vertical"===r?{rowStep:1,colStep:0}:"diagonal up"===r?{rowStep:-1,colStep:1}:"diagonal down"===r?{rowStep:1,colStep:1}:{rowStep:0,colStep:1}}function insert(r){r=deepCopy(r);for(var e=stepDirection(r.direction),t=deepCopy(r.start),o={row:t.row+e.rowStep*r.word.length,col:t.col+e.colStep*r.word.length},n={start:r.reverse?o:t,end:r.reverse?t:o,word:r.word,reverse:!!r.reverse},a=0;a<r.word.length;a++){var i=r.grid[r.start.row][r.start.col],s=r.reverse?r.word[r.word.length-(a+1)].toUpperCase():r.word[a].toUpperCase();if("-"===i)r.grid[r.start.row][r.start.col]=s;else if(i!==s)return!1;r.start.row+=e.rowStep,r.start.col+=e.colStep}return{grid:r.grid,key:n}}function fillRandom(r){for(var e=deepCopy(r),t=0;t<e.length;t++)for(var o=0;o<e[t].length;o++)"-"===e[t][o]&&(e[t][o]=randomLetter());return e}function range(r,e,t){for(var o=[],n=r;n<e+(Number(t)||0);n++)o.push(n);return o}function combinationRanges(r,e,t){for(var o=[],n=0;n<r.length;n++)for(var a=0;a<e.length;a++)o.push({row:r[n],col:e[a],direction:t});return o}function getMatrix(r,e,t){var o="diagonal up"===t?e.length-1:0,n=0,a="horizontal"===t||"diagonal up"===t?r.length-1:r.length-e.length,i="vertical"===t?r.length-1:r.length-e.length;return combinationRanges(range(o,a,!0),range(n,i,!0),t)}function concatMatrices(r,e,t,o){for(var n=[],a=0;a<t.length;a++)n=o?n.concat(getMatrix(r,e,t[a]).randomize()):n.concat(getMatrix(r,e,t[a]));return n}var testWords=["apple","pear","banana","otherfruit","zebra","cornacopia","razzledazzle","jumble","plankton","draught","carnivore","pheasant","test","data","fiber","soylent","sunflower","carbohydrate","fifth","constitution","metabolism","beets","oil","biohazard","natural","protein","improvement","profile","powder","rice","building","view","concert","power","garbage","onyx","gross","story","superfluous","arbitrary","stuff","conditional","gargantuan","dragon","fuss","magical","weeds","garden","incontrovertable","archenemy","claw","injuries","stump","wheel","octagonal","oyster"];Array.prototype.randomize=function(){return this.sort(function(){return Math.random()<.5?-1:1}),this},Array.prototype.shuffle=function(){return this.push(this.shift()),this},$(function(){for(var r=[],e=30,t=0;e>t;t++)$.ajax({type:"GET",url:"http://randomword.setgetgo.com/get.php",dataType:"jsonp",success:function(t){if(-1===r.indexOf(t.Word)&&r.push(t.Word),r.length===e){r=r.sort(function(r,e){return e.length-r.length});var o=makePuzzle({reversable:!1,directions:["vertical","diagonal up","diagonal down","horizontal"],words:r});$("body").append('<table class="wordsearch"></table>');for(var n=0;n<o.grid.length;n++){$(".wordsearch").append('<tr class="wsrow-'+n+'"></tr>');for(var a=0;a<o.grid[n].length;a++)$(".wsrow-"+n).append('<td class="wscell-'+n+"-"+a+'">'+o.grid[n][a]+"</td>")}}}})});var module=module||{};module.exports={blankPuzzle:blankPuzzle,deepCopy:deepCopy,randomLetter:randomLetter,resize:resize,stepDirection:stepDirection,insert:insert,fillRandom:fillRandom,range:range,combinationRanges:combinationRanges,concatMatrices:concatMatrices,getMatrix:getMatrix};